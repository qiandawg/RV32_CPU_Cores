//A simulation-only module intended to complain loudly when an unimplemented
//instruction is encountered.  Configurable via the inst_present.vh
`include "inst_present.vh"

`define v(INAME) \
  if(!`INAME) begin \
    $display("Encountered unimplemented instruction %s. Stopping sim", `"INAME`"); \
    $stop; \
  end

module mips_bad_inst_det (
    input[31:0] inst
    );

    always@(*) begin
        casez(inst)
            32'b0000_00??_????_????_????_?000_0010_0000: `v(ADD)
            32'b0010_00??_????_????_????_????_????_????: `v(ADDI)
            32'b0010_01??_????_????_????_????_????_????: `v(ADDIU)
            32'b0000_00??_????_????_????_?000_0010_0001: `v(ADDU)
            32'b0000_00??_????_????_????_?000_0010_0100: `v(AND)
            32'b0011_00??_????_????_????_????_????_????: `v(ANDI)
            32'b0001_00??_????_????_????_????_????_????: `v(BEQ)
            32'b0000_01??_???0_0001_????_????_????_????: `v(BGEZ)
            32'b0000_01??_???1_0001_????_????_????_????: `v(BGEZAL)
            32'b0001_11??_???0_0000_????_????_????_????: `v(BGTZ)
            32'b0001_10??_???0_0000_????_????_????_????: `v(BLEZ)
            32'b0000_01??_???0_0000_????_????_????_????: `v(BLTZ)
            32'b0000_01??_???1_0000_????_????_????_????: `v(BLTZAL)
            32'b0001_01??_????_????_????_????_????_????: `v(BNE)
            32'b0000_00??_????_????_????_?000_0001_1010: `v(DIV)
            32'b0000_00??_????_????_????_?000_0001_1011: `v(DIVU)
            32'b0000_10??_????_????_????_????_????_????: `v(J)
            32'b0000_11??_????_????_????_????_????_????: `v(JAL)
            32'b0000_00??_???0_0000_0000_0000_0000_1000: `v(JR)
            32'b1000_00??_????_????_????_????_????_????: `v(LB)
            32'b0011_11??_????_????_????_????_????_????: `v(LUI)
            32'b1000_11??_????_????_????_????_????_????: `v(LW)
            32'b0000_0000_0000_0000_????_?000_0001_0000: `v(MFHI)
            32'b0000_0000_0000_0000_????_?000_0001_0010: `v(MFLO)
            32'b0100_0000_000?_????_????_?000_0000_0000: `v(MFC0)
            32'b0100_0000_100?_????_????_?000_0000_0???: `v(MTC0)
            32'b0100_0010_0000_0000_0000_0000_0001_1000: `v(ERET)
            32'b0000_00??_????_????_????_?000_0001_1000: `v(MULT)
            32'b0000_00??_????_????_????_?000_0001_1001: `v(MULTU)
            32'b0000_00??_????_????_????_?000_0010_0101: `v(OR)
            32'b0011_01??_????_????_????_????_????_????: `v(ORI)
            32'b1010_00??_????_????_????_????_????_????: `v(SB)
            32'b0000_00??_????_????_????_????_??00_0000: `v(SLL)
            32'b0000_00??_????_????_????_????_??00_0100: `v(SLLV)
            32'b0000_00??_????_????_????_?000_0010_1010: `v(SLT)
            32'b0010_10??_????_????_????_????_????_????: `v(SLTI)
            32'b0010_11??_????_????_????_????_????_????: `v(SLTIU)
            32'b0000_00??_????_????_????_?000_0010_1011: `v(SLTU)
            32'b0000_00??_????_????_????_????_??00_0011: `v(SRA)
            32'b0000_00??_????_????_????_????_??00_0010: `v(SRL)
            32'b0000_00??_????_????_????_?000_0000_0110: `v(SRLV)
            32'b0000_00??_????_????_????_?000_0010_0010: `v(SUB)
            32'b0000_00??_????_????_????_?000_0010_0011: `v(SUBU)
            32'b1010_11??_????_????_????_????_????_????: `v(SW)
            32'b0000_00??_????_????_????_????_??00_1100: `v(SYSCALL)
            32'b0000_00??_????_????_????_????_??10_0110: `v(XOR)
            32'b0011_10??_????_????_????_????_????_????: `v(XORI)

            default: $display("WARNING: Instruction 0x%H is unrecognized by the simulation unimplemented instruction detector", inst);
        endcase
    end

endmodule
